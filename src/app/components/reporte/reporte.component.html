<div>
    <label class="label" for="meses">Selecciona un mes:</label>
    <select id="meses" (change)="cambiarMes($event)">
      <option value="" disabled selected>-- Seleccione --</option>
      <option *ngFor="let mes of meses" [value]="mes">{{ mes }}</option>
    </select>
  </div>
  <button class="btn-nueva" (click)="exportPDF()">Generar Reporte</button>
  <button class="btn-nueva" (click)="cancelarReporte()">Cancelar</button>
<div id="content" class="table-container" *ngIf="mesSeleccionado">

    <h2 class="subtitulo">REPORTE DE FONDO ROTATORIO DEL MES DE {{mesSeleccionado}}</h2>

    <!-- Tabla de Entradas del Mes -->
    <h3 class="subtitulo">ENTRADAS DEL MES</h3>

    <table>
        <thead>
            <tr>
                <th class="hidden">ID Entrada</th>
                <th>Fecha</th>
                <th>Monto</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let entrada of entradasDelMes">
                <td class="hidden">{{ entrada.identrada }}</td>
                <td>{{ formatDate(entrada.fecha) }}</td>
                <td>{{ entrada.monto | currency }}</td>
            </tr>
            <tr *ngIf="entradasDelMes.length === 0">
                <td colspan="3" style="text-align: center; color: #666;">No hay entradas registradas en este mes</td>
            </tr>
        </tbody>
        <tr>
            <td colspan="1" style="text-align: left; font-weight: bold; background-color: rgb(208, 209, 209);"></td>
            <td colspan="2" style="text-align: left; font-weight: bold; background-color: rgb(208, 209, 209);">
                TOTAL ENTRADAS: {{totalEntradasMes | currency}}
            </td>
        </tr>
    </table>

    <!-- Tabla de Facturas Pagas del Mes -->
    <h3 class="subtitulo">FACTURAS PAGAS DEL MES</h3>

    <table>
        <thead>
            <tr>
                <th class="hidden">ID Facturación</th>
                <th>Fecha</th>
                <th>Empresa</th>
                <th>Monto</th>
                <th>Estado</th>
                <th>Observación</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let facturacion of facturasPagasDelMes">
                <td class="hidden">{{ facturacion.idfacturacion }}</td>
                <td>{{ formatDate(facturacion.fecha) }}</td>
                <td>{{ facturacion.empresa }}</td>
                <td>{{ facturacion.monto | currency }}</td>
                <td>{{ facturacion.estado }}</td>
                <td>{{ facturacion.observacion }}</td>
            </tr>
            <tr *ngIf="facturasPagasDelMes.length === 0">
                <td colspan="6" style="text-align: center; color: #666;">No hay facturas pagas registradas en este mes</td>
            </tr>
        </tbody>
        <tr>
            <td colspan="2" style="text-align: left; font-weight: bold; background-color: rgb(208, 209, 209);"></td>
            <td colspan="4" style="text-align: left; font-weight: bold; background-color: rgb(208, 209, 209);">
                TOTAL FACTURAS PAGAS: {{totalFacturasPagasMes | currency}}
            </td>
        </tr>
    </table>

    <!-- Resumen del Mes -->
    <div class="resumen-mes">
        <h4>RESUMEN DEL MES DE {{mesSeleccionado}}</h4>
        <div class="resumen-item">
            <span class="resumen-label">Total de Entradas:</span>
            <span class="resumen-valor">{{totalEntradasMes | currency}}</span>
        </div>
        <div class="resumen-item">
            <span class="resumen-label">Total de Salidas (Facturas Pagas):</span>
            <span class="resumen-valor">{{totalFacturasPagasMes | currency}}</span>
        </div>
        <div class="resumen-item total">
            <span class="resumen-label">Saldo del Mes:</span>
            <span class="resumen-valor"
                  [class.positivo]="(+totalEntradasMes - +totalFacturasPagasMes) >= 0"
                  [class.negativo]="(+totalEntradasMes - +totalFacturasPagasMes) < 0">
                {{(+totalEntradasMes - +totalFacturasPagasMes) | currency}}
            </span>
        </div>
    </div>
</div>

<!-- Mensaje cuando no hay mes seleccionado -->
<div *ngIf="!mesSeleccionado" class="mensaje-seleccion">
    <p>Por favor, seleccione un mes para generar el reporte.</p>
</div>
